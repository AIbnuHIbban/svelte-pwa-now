{
  "version": 3,
  "file": "components.css",
  "sources": [
    "..\\src\\components\\PlaceList.svelte"
  ],
  "sourcesContent": [
    "<script>\r\n  import {\r\n    currentLat,\r\n    currentLong,\r\n    searchString,\r\n    selectedIndex,\r\n    geoPermissionGranted\r\n  } from \"../store/store.js\";\r\n  import { toilets } from \"../data/toilets.js\";\r\n  import PlaceListItem from \"./PlaceListItem.svelte\";\r\n  import Searchbar from \"./Searchbar.svelte\";\r\n  import L from \"leaflet\";\r\n  import { onMount, getContext } from \"svelte\";\r\n\r\n  onMount(async () => {\r\n    const { getMap } = getContext(\"mapContextKey\");\r\n    const map = getMap();\r\n  });\r\n\r\n  let filtered = [];\r\n\r\n  function receiveKeyPress(event) {\r\n    const key = event.detail.key;\r\n\r\n    if ($selectedIndex < filtered.length - 1 && key === \"ArrowDown\") {\r\n      selectedIndex.update(selectedIndex => selectedIndex + 1);\r\n    } else if ($selectedIndex > 0 && key === \"ArrowUp\") {\r\n      selectedIndex.update(selectedIndex => selectedIndex - 1);\r\n    } else if (filtered.length > 0 && key === \"Enter\") {\r\n      currentLat.set(filtered[$selectedIndex].lat);\r\n      currentLong.set(filtered[$selectedIndex].long);\r\n      searchString.set(\"\");\r\n    }\r\n  }\r\n\r\n  $: if ($searchString.length > 0) {\r\n    selectedIndex.set(0);\r\n\r\n    filtered = toilets.filter(\r\n      item =>\r\n        item.name.toLowerCase().includes($searchString.toLowerCase()) ||\r\n        item.address.toLowerCase().includes($searchString.toLowerCase())\r\n    );\r\n\r\n    let referenceCenter;\r\n    let distance;\r\n    if (geoPermissionGranted) {\r\n      referenceCenter = L.latLng($currentLat, $currentLong);\r\n    } else {\r\n      referenceCenter = map.getCenter();\r\n    }\r\n\r\n    filtered.forEach(filteredItem => {\r\n      distance = referenceCenter.distanceTo(\r\n        L.latLng(filteredItem.lat, filteredItem.long)\r\n      );\r\n      filteredItem.distance = distance;\r\n    });\r\n\r\n    filtered.sort((first, second) => first.distance - second.distance);\r\n  } else {\r\n    selectedIndex.set(0);\r\n    filtered = [];\r\n  }\r\n</script>\r\n\r\n<style>.searchList{max-height:16rem}@media screen and (min-width:768px){.searchList{max-height:32rem}}</style>\r\n\r\n<div>\r\n  <Searchbar on:keyboard={e => receiveKeyPress(e)}/>\r\n  <div\r\n    class=\"searchList w-full sm:w-1/2 overflow-auto mt-1 rounded-lg bg-gray-200 shadow\"\r\n  >\r\n    {#each filtered as place, i} <PlaceListItem name={place.name}\r\n    address={place.address} rating={place.rating} lat={place.lat}\r\n    long={place.long} key={i} distance={place.distance} selected={$selectedIndex\r\n    === i ? true : false}/> {/each}\r\n  </div>\r\n</div>\r\n"
  ],
  "names": [],
  "mappings": "AAkEO,0BAAW,CAAC,WAAW,KAAK,CAAC,OAAO,MAAM,CAAC,GAAG,CAAC,WAAW,KAAK,CAAC,CAAC,0BAAW,CAAC,WAAW,KAAK,CAAC,CAAC"
}